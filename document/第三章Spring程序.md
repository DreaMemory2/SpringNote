# 三、Spring的入门程序

## 3.1 Spring的下载

官网地址：[https://spring.io/](https://spring.io/)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663750070460-6f435325-6d12-42fe-85be-886f92c7c40f.png#averageHue=%2373b445&clientId=u2e73fadb-f68e-4&from=paste&height=915&id=u78eec72e&originHeight=915&originWidth=1577&originalType=binary&ratio=1&rotation=0&showTitle=false&size=138164&status=done&style=shadow&taskId=u1f843925-065c-4a35-9570-2b61eaa4d66&title=&width=1577)
官网地址（中文）：[http://spring.p2hp.com/](http://spring.p2hp.com/)
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663749872857-84b6d914-ea8d-4758-97a7-b9d4dd61ebff.png#averageHue=%2373b445&clientId=u2e73fadb-f68e-4&from=paste&height=916&id=u666db9f9&originHeight=916&originWidth=1579&originalType=binary&ratio=1&rotation=0&showTitle=false&size=138610&status=done&style=shadow&taskId=u408e6d5e-cc33-48e6-8dd3-3292f929903&title=&width=1579)
打开Spring官网后，可以看到Spring Framework，以及通过Spring Framework衍生的其它框架：
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663749081947-b895cb4e-b7f6-4120-a1fe-a14651044847.png#averageHue=%23fcfaf8&clientId=u2e73fadb-f68e-4&from=paste&height=948&id=u1f2db9fb&originHeight=948&originWidth=758&originalType=binary&ratio=1&rotation=0&showTitle=false&size=143563&status=done&style=shadow&taskId=u0b25e745-1bd4-403d-9361-f17d4c81f05&title=&width=758)
我们即将要学习的就是Spring Framework。
怎么下载呢？

- 第一步：进入github

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663751885843-1a92db90-28df-4f6a-a782-c3be716148af.png#averageHue=%23fcfbfb&clientId=u2e73fadb-f68e-4&from=paste&height=568&id=u265b5525&originHeight=568&originWidth=1258&originalType=binary&ratio=1&rotation=0&showTitle=false&size=95392&status=done&style=shadow&taskId=u4ac013cd-d2bc-4498-8e9b-09850e0b53f&title=&width=1258)

- 第二步：找到下图位置，点击超链接

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663751963085-dd8e5354-bccb-4776-b85d-4b9234f46b59.png#averageHue=%23fefcfb&clientId=u2e73fadb-f68e-4&from=paste&height=543&id=u1ea291be&originHeight=543&originWidth=1163&originalType=binary&ratio=1&rotation=0&showTitle=false&size=52591&status=done&style=shadow&taskId=u8a3b1398-c52d-43f7-a885-b13e46afd36&title=&width=1163)

- 第三步：找到下图位置，点击超链接

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663752041647-c9b73ddb-b533-46bc-9894-593a899b599e.png#averageHue=%23f2f1cf&clientId=u2e73fadb-f68e-4&from=paste&height=556&id=ufaf9f0a3&originHeight=556&originWidth=1232&originalType=binary&ratio=1&rotation=0&showTitle=false&size=51356&status=done&style=shadow&taskId=ucf7b75dc-28a2-4400-a902-a0ee4f40337&title=&width=1232)

- 第四步：按照下图步骤操作

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663752134067-1018b3b1-0f1f-47f7-a1a1-f662d2f67308.png#averageHue=%23b7c089&clientId=u2e73fadb-f68e-4&from=paste&height=847&id=ufc65a5ca&originHeight=847&originWidth=872&originalType=binary&ratio=1&rotation=0&showTitle=false&size=92678&status=done&style=shadow&taskId=u35f429d9-082f-46a6-9f15-4d182d4b80f&title=&width=872)

- 第五步：继续在springframework目录下找下图的spring，点开之后你会看到很多不同的版本

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663752209054-96544282-8f58-4903-a274-2bb67a9dcae8.png#averageHue=%23faf8f8&clientId=u2e73fadb-f68e-4&from=paste&height=340&id=ue3b14226&originHeight=340&originWidth=409&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16179&status=done&style=shadow&taskId=ud0fe47d4-ca55-4707-8678-dc3be432e34&title=&width=409)

- 第六步：选择对应的版本

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663752303938-9477a726-a07a-40ae-9b74-e5e4780cc6d1.png#averageHue=%23fcfbfb&clientId=u2e73fadb-f68e-4&from=paste&height=673&id=uecb773b6&originHeight=673&originWidth=1349&originalType=binary&ratio=1&rotation=0&showTitle=false&size=92599&status=done&style=shadow&taskId=u7b4e1767-d69f-45e9-a715-70f74874468&title=&width=1349)

- 第七步：点击上图的url

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663752388207-ead56023-2117-4b68-b70e-2929767b4b67.png#averageHue=%23ebe9e8&clientId=u2e73fadb-f68e-4&from=paste&height=199&id=u9a4f6a44&originHeight=199&originWidth=827&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29781&status=done&style=shadow&taskId=u91d0ae36-5c9c-4771-b868-f02a03d9045&title=&width=827)
点击spring-5.3.9-dist.zip下载spring框架。
将下载的zip包解压：
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663753313903-f48e2caf-73f1-4aaf-a503-e275795e67ba.png#averageHue=%23fdfbf9&clientId=u2e73fadb-f68e-4&from=paste&height=164&id=u3e6900d7&originHeight=164&originWidth=250&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3296&status=done&style=shadow&taskId=ua146dde0-54f4-4da3-b687-14091949100&title=&width=250)
docs：spring框架的API帮助文档
libs：spring框架的jar文件（**用spring框架就是用这些jar包**）
schema：spring框架的XML配置文件相关的约束文件

![标头.jpg](https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&clientId=uc5a67c34-8a0d-4&from=paste&height=78&id=ovQZk&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23158&status=done&style=shadow&taskId=u98709943-fd0b-4e51-821c-a3fc0aef219&title=&width=1400)

## 3.2 Spring的jar文件

打开libs目录，会看到很多jar包：
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663809473261-c5c10c35-7407-44d4-81da-8f0baa236179.png#averageHue=%23f7f4f1&clientId=u27d5a243-6a1b-4&from=paste&height=64&id=u48870df8&originHeight=64&originWidth=290&originalType=binary&ratio=1&rotation=0&showTitle=false&size=3252&status=done&style=shadow&taskId=u0d8858ee-96c7-4927-bb31-66268d1d8ef&title=&width=290)
spring-core-5.3.9.jar：字节码（**这个是支撑程序运行的jar包**）
spring-core-5.3.9-javadoc.jar：代码中的注释
spring-core-5.3.9-sources.jar：源码
我们来看一下spring框架都有哪些jar包：
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663809688152-48c02538-b2c0-4649-a415-3ae25feeadab.png#averageHue=%23f8f5f2&clientId=u27d5a243-6a1b-4&from=paste&height=480&id=u07fff797&originHeight=480&originWidth=256&originalType=binary&ratio=1&rotation=0&showTitle=false&size=9616&status=done&style=shadow&taskId=ub889857c-9240-4fe4-941b-ff91175f6ab&title=&width=256)

| **JAR文件**                        | **描述**                                                                                                                                                                   |
|----------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| spring-aop-5.3.9.jar             | **这个jar 文件包含在应用中使用Spring 的AOP 特性时所需的类**                                                                                                                                  |
| spring-aspects-5.3.9.jar         | **提供对AspectJ的支持，以便可以方便的将面向切面的功能集成进IDE中**                                                                                                                                 |
| spring-beans-5.3.9.jar           | **这个jar 文件是所有应用都要用到的，它包含访问配置文件、创建和管理bean 以及进行Inversion ofControl / Dependency Injection（IoC/DI）操作相关的所有类。如果应用只需基本的IoC/DI 支持，引入spring-core.jar 及spring-beans.jar 文件就可以了。** |
| spring-context-5.3.9.jar         | **这个jar 文件为Spring 核心提供了大量扩展。可以找到使用Spring ApplicationContext特性时所需的全部类，JDNI 所需的全部类，instrumentation组件以及校验Validation 方面的相关类。**                                               |
| spring-context-indexer-5.3.9.jar | 虽然类路径扫描非常快，但是Spring内部存在大量的类，添加此依赖，可以通过在编译时创建候选对象的静态列表来提高大型应用程序的启动性能。                                                                                                     |
| spring-context-support-5.3.9.jar | 用来提供Spring上下文的一些扩展模块,例如实现邮件服务、视图解析、缓存、定时任务调度等                                                                                                                            |
| spring-core-5.3.9.jar            | **Spring 框架基本的核心工具类。Spring 其它组件要都要使用到这个包里的类，是其它组件的基本核心，当然你也可以在自己的应用系统中使用这些工具类。**                                                                                         |
| spring-expression-5.3.9.jar      | Spring表达式语言。                                                                                                                                                             |
| spring-instrument-5.3.9.jar      | Spring3.0对服务器的代理接口。                                                                                                                                                      |
| spring-jcl-5.3.9.jar             | Spring的日志模块。JCL，全称为"Jakarta Commons Logging"，也可称为"Apache Commons Logging"。                                                                                               |
| spring-jdbc-5.3.9.jar            | **Spring对JDBC的支持。**                                                                                                                                                      |
| spring-jms-5.3.9.jar             | 这个jar包提供了对JMS 1.0.2/1.1的支持类。JMS是Java消息服务。属于JavaEE规范之一。                                                                                                                   |
| spring-messaging-5.3.9.jar       | 为集成messaging api和消息协议提供支持                                                                                                                                                |
| spring-orm-5.3.9.jar             | **Spring集成ORM框架的支持，比如集成hibernate，mybatis等。**                                                                                                                             |
| spring-oxm-5.3.9.jar             | 为主流O/X Mapping组件提供了统一层抽象和封装，OXM是Object Xml Mapping。对象和XML之间的相互转换。                                                                                                        |
| spring-r2dbc-5.3.9.jar           | Reactive Relational Database Connectivity (关系型数据库的响应式连接) 的缩写。这个jar文件是Spring对r2dbc的支持。                                                                                    |
| spring-test-5.3.9.jar            | 对Junit等测试框架的简单封装。                                                                                                                                                        |
| spring-tx-5.3.9.jar              | **为JDBC、Hibernate、JDO、JPA、Beans等提供的一致的声明式和编程式事务管理支持。**                                                                                                                   |
| spring-web-5.3.9.jar             | **Spring集成MVC框架的支持，比如集成Struts等。**                                                                                                                                        |
| spring-webflux-5.3.9.jar         | **WebFlux是 Spring5 添加的新模块，用于 web 的开发，功能和 SpringMVC 类似的，Webflux 使用当前一种比较流程响应式编程出现的框架。**                                                                                   |
| spring-webmvc-5.3.9.jar          | **SpringMVC框架的类库**                                                                                                                                                       |
| spring-websocket-5.3.9.jar       | Spring集成WebSocket框架时使用                                                                                                                                                   |

**注意：**
**如果你只是想用Spring的IoC功能，仅需要引入：spring-context即可。将这个jar包添加到classpath当中。**
**如果采用maven只需要引入context的依赖即可。**

```xml
<!--Spring6的正式版发布之前，这个仓库地址是需要的-->
<repositories>
    <repository>
        <id>repository.spring.milestone</id>
        <name>Spring Milestone Repository</name>
        <url>https://repo.spring.io/milestone</url>
    </repository>
</repositories>

<dependencies>
<!--spring context依赖：使用的是6.0.0-M2里程碑版-->
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
    <version>6.0.0-M2</version>
</dependency>
</dependencies>
```

![标头.jpg](https://cdn.nlark.com/yuque/0/2023/jpeg/21376908/1692002570088-3338946f-42b3-4174-8910-7e749c31e950.jpeg#averageHue=%23f9f8f8&clientId=uc5a67c34-8a0d-4&from=paste&height=78&id=ITU1Z&originHeight=78&originWidth=1400&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23158&status=done&style=shadow&taskId=u98709943-fd0b-4e51-821c-a3fc0aef219&title=&width=1400)

## 3.3 第一个Spring程序

**前期准备**：

- 打开IDEA创建Empty Project：spring6

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663815378480-59b3dcb2-e8d5-40e5-802d-6df67ffe3811.png#averageHue=%233d4144&clientId=u27d5a243-6a1b-4&from=paste&height=651&id=ucd526a40&originHeight=651&originWidth=770&originalType=binary&ratio=1&rotation=0&showTitle=false&size=39301&status=done&style=shadow&taskId=uadb721a8-fcfa-433a-82f8-52e9fb402f7&title=&width=770)

- 设置JDK版本17，编译器版本17

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663817569379-a769d553-1e24-43a6-8293-de0fd01f3e73.png#averageHue=%233c4043&clientId=u27d5a243-6a1b-4&from=paste&height=838&id=uff7990a9&originHeight=838&originWidth=1024&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35191&status=done&style=shadow&taskId=uf97a56d9-db3b-48c1-895d-54627572b63&title=&width=1024)

- 设置IDEA的Maven：关联自己的maven

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663815467638-04a7795c-8e9d-4751-8087-e326bd7c74a3.png#averageHue=%233d4246&clientId=u27d5a243-6a1b-4&from=paste&height=702&id=uf0ade20e&originHeight=702&originWidth=979&originalType=binary&ratio=1&rotation=0&showTitle=false&size=63858&status=done&style=shadow&taskId=u9ccdb637-504b-4880-b45f-ca5a921a3eb&title=&width=979)

- 在空的工程spring6中创建第一个模块：spring6-001-first

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663815542642-bf7fa2e5-ccea-4311-aa4e-f5571fe206e1.png#averageHue=%233d4145&clientId=u27d5a243-6a1b-4&from=paste&height=599&id=u2663eab0&originHeight=599&originWidth=786&originalType=binary&ratio=1&rotation=0&showTitle=false&size=49512&status=done&style=shadow&taskId=u1403f748-7c07-498b-8bf1-f749fcbffb8&title=&width=786)
**第一步：添加spring context的依赖，在pom.xml配置如下**

```xml
<dependencies>
    <!-- Spring Context依赖 -->
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-context</artifactId>
        <version>6.0.0-M2</version>
    </dependency>
</dependencies>
```

**注意：打包方式jar。**
当加入Spring  Context的依赖之后，会关联引入其他依赖：
spring aop： 面向切面编程
spring beans： IoC核心
spring core： Spring的核心工具包
spring jcl： Spring的日志包
spring expression： Spring表达式
**第二步：添加junit依赖**

```xml
<!-- Junit 依赖-->        
<dependency>
    <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.13.2</version>
        <scope>test</scope>
    </dependency>
</dependencies>

```

**第三步：定义bean：User**

`public class User {}`

**第四步：编写spring的配置文件：beans.xml。该文件放在类的根路径下。**
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663816617460-ee35243c-fddc-4771-af28-0017f8af2ab5.png#averageHue=%2381a37e&clientId=u27d5a243-6a1b-4&from=paste&height=513&id=u818294ea&originHeight=513&originWidth=539&originalType=binary&ratio=1&rotation=0&showTitle=false&size=37339&status=done&style=shadow&taskId=uaa9e8c74-ca11-435a-91c2-d7d76be7340&title=&width=539)
上图是使用IDEA工具自带的spring配置文件的模板进行创建。
配置文件中进行bean的配置。

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">

    <bean id="userBean" class="com.powernode.spring6.bean.User"/>
</beans>
```

bean的id和class属性：

- **id属性：代表对象的唯一标识**
- **class属性：用来指定要创建的java对象的类名，这个类名必须是全限定类名（带包名）**

**第五步：编写测试程序**

```java
package com.powernode.spring6.test;
public class SpringTest {
    @Test
    public void testFirst(){
        // 初始化Spring容器上下文（解析beans.xml文件，创建所有的bean对象）
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("beans.xml");
        // 根据id获取bean对象
        Object userBean = applicationContext.getBean("userBean");
        System.out.println(userBean);
    }
}

```

**第七步：运行测试程序**
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663818370960-22cf8670-7e79-48d2-b4fe-008ead1a6607.png#averageHue=%239aa28c&clientId=u27d5a243-6a1b-4&from=paste&height=216&id=u62327c92&originHeight=216&originWidth=779&originalType=binary&ratio=1&rotation=0&showTitle=false&size=24111&status=done&style=shadow&taskId=u8fad8f45-1956-4155-a47c-ee65fe7b73e&title=&width=779)

## 3.4 第一个Spring程序详细剖析

1. **bean标签的id属性可以重复吗？**
**通过测试得出：在Spring的配置文件中id是不能重名**
2. **底层是怎么创建对象的，是通过反射机制调用无参数构造方法**

```java
public class User {
    public User() {
        // 在User类中添加无参数构造方法
        System.out.println("User的无参数构造方法执行");
    }
}
```

运行测试程序：
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663829191565-09e55ce2-e426-4f34-a49d-1ecde4c66dd2.png#averageHue=%238e7a62&clientId=u27d5a243-6a1b-4&from=paste&height=148&id=u9b0114c5&originHeight=148&originWidth=586&originalType=binary&ratio=1&rotation=0&showTitle=false&size=18734&status=done&style=shadow&taskId=ud734e4b2-6179-489d-8e78-985da9b3d0e&title=&width=586)
**通过测试得知：创建对象时确实调用了无参数构造方法。**

**所以要想让spring给你创建对象，必须保证无参数构造方法是存在的。**
Spring是如何创建对象的原理

```java
// dom4j解析beans.xml文件，从中获取class的全限定类名
// 通过反射机制调用无参数构造方法创建对象
Class clazz = Class.forName("com.powernode.spring6.bean.User");
Object obj = clazz.newInstance();
```

3. **把创建好的对象存储到Map集合数据结构**

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663829973365-59ca2f4c-4d81-471f-8e4c-aa272f8c2b81.png#averageHue=%23e2e1e1&clientId=u27d5a243-6a1b-4&from=paste&height=520&id=ua2fc4b9b&originHeight=520&originWidth=455&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16942&status=done&style=shadow&taskId=u0ad3d777-d9c5-40fa-8f8a-44dc30a731a&title=&width=455)

4. **spring配置文件的名字必须叫做beans.xml吗？**
   Spring配置文件名字是我们负责提供的，显然Spring配置文件的名字是随意的。

5. **像这样的beans.xml文件可以有多个吗？**

```xml
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd">
    <bean id="vipBean" class="com.powernode.spring6.bean.Vip"/>
</beans>
```

```java
public class SpringTest {
    @Test
    public void test(){
        // 初始化Spring容器上下文（解析beans.xml文件，创建所有的bean对象）
        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("beans.xml","spring.xml");

        // 根据id获取bean对象
        Object userBean = applicationContext.getBean("userBean");
        Object vipBean = applicationContext.getBean("vipBean");

        System.out.println(userBean);
        System.out.println(vipBean);
    }
}

```

通过测试得知，spring的配置文件可以有多个，在ClassPathXmlApplicationContext构造方法的参数上传递文件路径即可。通过源码可以看到：
![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663830614508-d00ecc07-5b51-4d2d-bc1d-8f2cb4f0c785.png#averageHue=%23312d2c&clientId=u27d5a243-6a1b-4&from=paste&height=150&id=ubab0ac13&originHeight=150&originWidth=1041&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22074&status=done&style=shadow&taskId=ucf36301c-f4d0-4886-8e29-9ce5f2c0fd8&title=&width=1041)

6. **在配置文件中配置的类必须是自定义的吗，可以使用JDK中的类吗，例如：java.util.Date？**
   
   ```xml
   <ean id="dateBean" class="java.util.Date"/>
   ```
   
   ```java
   public class Spring6Test {
       @Test
       public void test(){
       // 初始化Spring容器上下文（解析beans.xml文件，创建所有的bean对象）
       ApplicationContext applicationContext = new             ClassPathXmlApplicationContext("beans.xml","spring.xml");
       // 根据id获取bean对象
       Object userBean = applicationContext.getBean("userBean");
       Object vipBean = applicationContext.getBean("vipBean");
       Object dateBean = applicationContext.getBean("dateBean");
       // 打印bean
       System.out.println(userBean);
       System.out.println(vipBean);
       System.out.println(dateBean);
       }
   }
   ```

通过测试得知，在spring配置文件中配置的bean可以任意类，只要这个类不是抽象的，并且提供了无参数构造方法。

7. **getBean()方法调用时，如果指定的id不存在**

通过测试得知，当id不存在的时候，会出现异常

8. **getBean()方法返回的类型是Object，如果访问子类的特有属性和方法时，还需要向下转型，有其它办法可以解决这个问题吗？**
   
   ```java
   User user = applicationContext.getBean("userBean", User.class);
   ```

9. **ClassPathXmlApplicationContext是从类路径中加载配置文件，如果没有在类路径当中，又应该如何加载配置文件呢？**

![image.png](https://cdn.nlark.com/yuque/0/2022/png/21376908/1663832523920-8df601e0-1fd3-43c2-92ad-dc57207b006a.png#averageHue=%23fcfaf9&clientId=u9fbc0c64-ef9a-4&from=paste&height=150&id=uc1304587&originHeight=150&originWidth=243&originalType=binary&ratio=1&rotation=0&showTitle=false&size=4452&status=done&style=shadow&taskId=u34726adc-bf57-4c79-99a9-8eab65eb224&title=&width=243)

```xml
<bean id="vipBean2" class="com.powernode.spring6.bean.Vip"/>
```

```java
ApplicationContext applicationContext2=new FileSystemXmlApplicationContext("d:/spring6.xml");
        Vip vip=applicationContext2.getBean("vipBean2",Vip.class);
        System.out.println(vip);
```

没有在类路径中的话，需要使用FileSystemXmlApplicationContext类进行加载配置文件。
这种方式较少用。一般都是将配置文件放到类路径当中，这样可移植性更强。

10. **ApplicationContext的超级父接口BeanFactory。**
    
    ```java
    BeanFactory beanFactory = new ClassPathXmlApplicationContext("spring.xml");
    Object vipBean = beanFactory.getBean("vipBean");
    
    System.out.println(vipBean);
    ```
    
    BeanFactory是Spring容器的超级接口。ApplicationContext是BeanFactory的子接口。



## 3.5 Spring6启用Log4j2日志框架

从Spring5之后，Spring框架支持集成的日志框架是Log4j2.如何启用日志框架：
第一步：引入Log4j2的依赖

```xml
<!-- Log4j2的依赖 -->
<dependency>
  <groupId>org.apache.logging.log4j</groupId>
  <artifactId>log4j-core</artifactId>
  <version>2.19.0</version>
</dependency>
<dependency>
  <groupId>org.apache.logging.log4j</groupId>
  <artifactId>log4j-slf4j2-impl</artifactId>
  <version>2.19.0</version>
</dependency>
```

第二步：在类的根路径下提供log4j2.xml配置文件（文件名固定为：log4j2.xml，文件必须放到类根路径下。）

```xml
<?xml version="1.0" encoding="UTF-8"?>

<configuration>

    <loggers>
        <!--
            level指定日志级别，从低到高的优先级：
                ALL < TRACE < DEBUG < INFO < WARN < ERROR < FATAL < OFF
        -->
        <root level="DEBUG">
            <appender-ref ref="spring6log"/>
        </root>
    </loggers>

    <appenders>
        <!--输出日志信息到控制台-->
        <console name="spring6log" target="SYSTEM_OUT">
            <!--控制日志输出的格式-->
            <PatternLayout pattern="%d{yyyy-MM-dd HH:mm:ss SSS} [%t] %-3level %logger{1024} - %msg%n"/>
        </console>
    </appenders>

</configuration>
```

第三步：使用日志框架

```java
Logger logger = LoggerFactory.getLogger(FirstSpringTest.class);
logger.info("我是一条日志消息");
```


